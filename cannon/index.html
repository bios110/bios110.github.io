<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Shattering Simulation</title>
    <script type="importmap">
        {
            "imports": {
                "p5": "https://cdn.jsdelivr.net/npm/p5@1.4.1/dist/p5.js"
            }
        }
    </script>
</head>
<body>
    <script type="module">
        import p5 from 'p5';

        let glass = [];
        let freq = 10; // Resonant frequency
        let amp = 0.1; // Amplitude of the vibration
        let time = 0;

        const sketch = (p) => {
            p.setup = () => {
                p.createCanvas(600, 600);
                p.background(220);
                for (let i = 0; i < 100; i++) {
                    glass.push({
                        x: p.random(p.width),
                        y: p.random(p.height),
                        vx: 0,
                        vy: 0,
                        r: p.random(2, 5)
                    });
                }
            };

            p.draw = () => {
                p.background(220);
                for (let i = 0; i < glass.length; i++) {
                    let g = glass[i];
                    g.vx += amp * p.sin(freq * time + g.x * 0.01);
                    g.vy += amp * p.sin(freq * time + g.y * 0.01);
                    g.x += g.vx;
                    g.y += g.vy;
                    g.vx *= 0.99;
                    g.vy *= 0.99;
                    p.fill(0, 0, 255);
                    p.ellipse(g.x, g.y, g.r * 2);
                    if (g.x < 0 || g.x > p.width || g.y < 0 || g.y > p.height) {
                        g.x = p.random(p.width);
                        g.y = p.random(p.height);
                        g.vx = 0;
                        g.vy = 0;
                    }
                }
                time += 0.01;
            };
        };

        new p5(sketch);
    </script>
</body>
</html>
